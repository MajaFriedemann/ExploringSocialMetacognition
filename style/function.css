/*
Visual changes in the experiment.
The experiment updates the #content div with a class named after the current
experiment phase.

Experiment phases are Study and Trial phases:
Study-splashScreen
Study-consent
Study-demographics
Study-introduction
Study-training
Study-practiceInstructions
Study-practice
Study-coreInstructions
Study-core
Study-debrief

Trial-begin
Trial-showStim
Trial-hideStim
Trial-getResponse
Trial-showAdvice
Trial-getFinalResponse
Trial-showFeedback
Trial-end
Trial-cleanup
 */

/* Hide the task before the Study task begins */
.Study-splashScreen #content,
.Study-consent #content,
.Study-demographics #content{
    display: none;
}

.Study-training #training-instructions {
    display: unset;
}
.Study-training .progress-bar .outer {
    animation: progress-demo 10s linear infinite;
}

/* Downgrade the visual appeal of the task while it's not interactable */
body:not(.Trial-any):not(.Study-training):not(.Study-practice):not(.Study-core):not(.Study-debrief):not(.Study-debriefAdvisors) #content {
    background-color: lightgrey;
}

/* Hide the stimulus when it's not needed. */
.Trial-begin #content #stimulus,
body:not(.Trial-any):not(.Study-practice):not(.Study-core) #content #stimulus {
    opacity: 0;
}

/* Hide the help button when we're not in practice */
body:not(.Study-practice) #help-button {
    display: none;
}

/* Hide the issue raising button during training */
body:not(.Study-practice):not(.Study-core) #report-button {
    display: none;
}

/* Hide response panel until it's first needed */
.Study-training:not(.Trial-getResponse) #response-panel {
    opacity: 0;
}

/* Show fully-opaque response panel when it should be the focus of attention. */
.Trial-getResponse #response-panel,
.Trial-showAdvice #response-panel,
.Trial-getFinalResponse #response-panel,
.Trial-showFeedback #response-panel {
    opacity: 1;
    z-index: 2;
}

/* interactable markers should look interactable */
.Trial-getResponse #response-panel .response-marker:not(.advisor),
.Trial-showAdvice #response-panel .response-marker:not(.advisor),
.Trial-getFinalResponse #response-panel .response-marker:not(.advisor),
.Trial-showFeedback #response-panel .response-marker:not(.advisor) {
    cursor: pointer;
}

/* Reveal the feedback marker during feedback phase */
.Trial-showFeedback .response-marker {
    display: unset;
}

/* Show the advice and ghost during advice and final decision phases */
.Trial-showAdvice .response-marker.advisor,
.Trial-getFinalResponse .response-marker.advisor,
.Trial-showFeedback .response-marker.advisor,
.Trial-getResponse .response-marker.ghost,
.Trial-showAdvice .response-marker.ghost,
.Trial-getFinalResponse .response-marker.ghost {
    display: block;
}

.Study-practice:not(.Trial-any) #stimulus,
.Study-core:not(.Trial-any) #stimulus {
    justify-content: center;
    transform: scale(4);
}

/* Issue reporting */
body.report-issue #report-issue {
    display: flex;
    z-index: 10;
}

@media screen and (max-height: 500px) {
    .Study-practice:not(.Trial-any) #stimulus,
    .Study-core:not(.Trial-any) #stimulus {
        transform: unset;
    }
}